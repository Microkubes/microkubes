<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Get Started with Microkubes · Microkubes</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Microkubes is a ground-up scalable microservice framework.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Get Started with Microkubes · Microkubes"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.microkubes.com/index.html"/><meta property="og:description" content="&lt;p&gt;Microkubes is a ground-up scalable microservice framework.&lt;/p&gt;
"/><meta property="og:image" content="https://www.microkubes.com/img/microkubes-post-photo.png"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-134728683-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://use.typekit.net/eaz5jri.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://snap.licdn.com/li.lms-analytics/insight.min.js"></script><script type="text/javascript" src="/js/linkedin.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/microkubes-logo.svg" alt="Microkubes"/><h2 class="headerTitleWithLogo">Microkubes</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive siteNavItemActive"><a href="/docs/installation-and-setup.html" target="_self">Docs</a></li><li class=""><a href="/help.html" target="_self">Support</a></li><li class=""><a href="/about.html" target="_self">About</a></li><li class=""><a href="https://github.com/Microkubes/microkubes/releases" target="_self">Download</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Get Started with Microkubes</span></h2></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Get Started with Microkubes</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/docs/installation-and-setup.html">Get Started with Microkubes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Microkubes Manual</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/introduction.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/installation.html">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/external-services.html">External Services</a></li><li class="navListItem"><a class="navItem" href="/docs/configuration.html">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/self-registration.html">Self Registration on Kong</a></li><li class="navListItem"><a class="navItem" href="/docs/security.html">Security</a></li><li class="navListItem"><a class="navItem" href="/docs/backends.html">Backends</a></li><li class="navListItem"><a class="navItem" href="/docs/deployments.html">Deployments</a></li><li class="navListItem"><a class="navItem" href="/docs/ci-cd.html">CI, CD, Code Quality</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Get Started with Microkubes</h1></header><article><div><span><p>Microkubes is a ground-up scalable microservice framework.
To get you started with Microkubes, follow this guide.</p>
<h1><a class="anchor" aria-hidden="true" id="installation-and-setup"></a><a href="#installation-and-setup" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation and setup</h1>
<p>Before running Microkubes, you need to install some prerequisites first.</p>
<h2><a class="anchor" aria-hidden="true" id="prerequisite-for-microkubes"></a><a href="#prerequisite-for-microkubes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisite for Microkubes</h2>
<p>You need Docker and Kubernetes running on your machine.</p>
<p>If you don't have Docker installed on your machine please follow these instructions <a href="https://docs.docker.com/install/">Docker Installation</a>.</p>
<p>If you don't have Kubernetes installed on you machine the easiest way to have Kubernetes running on your machine is installing Minikube version from Kubernetes following this <a href="https://kubernetes.io/docs/tasks/tools/install-minikube/">Minikube Install</a> guide.</p>
<h2><a class="anchor" aria-hidden="true" id="start-microkubes"></a><a href="#start-microkubes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Start Microkubes</h2>
<p>Microkubes is an open source framework for building data management platforms using microservices. For deploying this framework you to clone <a href="https://github.com/microkubes/microkubes">this</a> repository on your local machine:</p>
<pre><code class="hljs css language-bash">git <span class="hljs-built_in">clone</span> https://github.com/microkubes/microkubes
<span class="hljs-built_in">cd</span> microkubes
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="preparing"></a><a href="#preparing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preparing</h3>
<ol>
<li>Run a single-node Kubernetes cluster via Minikube tool</li>
</ol>
<pre><code class="hljs css language-bash">minikube start
</code></pre>
<ol start="2">
<li>Create keys for authorization servers:</li>
</ol>
<pre><code class="hljs css language-bash">./keys/create.sh
</code></pre>
<ol start="3">
<li>Create a default microkubes namespace and service account</li>
</ol>
<pre><code class="hljs css language-bash">kubectl create -f kubernetes/manifests/namespace.yaml
kubectl create -f kubernetes/manifests/serviceaccount.yaml
</code></pre>
<ol start="4">
<li>Create a secret from keys generated in Step 2</li>
</ol>
<pre><code class="hljs css language-bash">kubectl -n microkubes create secret generic microkubes-secrets \
    --from-file=keys/default \
    --from-file=keys/default.pub \
    --from-file=keys/private.pem \
    --from-file=keys/public.pub \
    --from-file=keys/service.cert \
    --from-file=keys/service.key \
    --from-file=keys/system \
    --from-file=keys/system.pub
</code></pre>
<ol start="5">
<li>Create a secret for the mongo objects creation</li>
</ol>
<pre><code class="hljs css language-bash">kubectl -n microkubes create secret generic mongo-init-db \
        --from-file=./kubernetes/manifests/mongo/create_microkubes_db_objects.sh
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="deploy-microkubes"></a><a href="#deploy-microkubes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploy Microkubes</h3>
<p>your first microservice
Run the following commands:</p>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">cd</span> kubernetes/manifests
kubectl create -f consul.yaml
kubectl create -f kube-consul-register.yaml
kubectl create -f kong.yaml
kubectl create -f mongo.yaml
kubectl create -f rabbitmq.yaml
kubectl create -f fakesmtp.yaml
kubectl create -f microkubes.yaml
</code></pre>
<p>The platform takes about 5 minutes to bring up and you can follow the progress using <code>kubectl -n microkubes get pods -w</code>.
Once all services are running, you can start using microkubes.</p>
<h3><a class="anchor" aria-hidden="true" id="check-that-microkubes-is-up-and-running"></a><a href="#check-that-microkubes-is-up-and-running" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Check that microkubes is up and running</h3>
<p>The API gateway is exposed as a nodePort in kubernetes, you can get the URL and do an http GET request to check that microkubes is responding.</p>
<pre><code class="hljs css language-bash">MICROKUBES_URL=`minikube service -n microkubes kong --url`
curl <span class="hljs-variable">$MICROKUBES_URL</span>/users
</code></pre>
<h1><a class="anchor" aria-hidden="true" id="setting-up-your-first-microservice-with-microkubes"></a><a href="#setting-up-your-first-microservice-with-microkubes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting up your first microservice with Microkubes</h1>
<p>We're going to use <a href="http://flask.pocoo.org/">Flask</a> to implement our first service with Microkubes.</p>
<p>First let's set up the project structure and add our first service:</p>
<pre><code class="hljs css language-bash">mkdir hello-service &amp;&amp; <span class="hljs-built_in">cd</span> hello-service
touch service.py
touch Dockerfile
touch service.yaml
</code></pre>
<p>The service will contain:</p>
<ul>
<li><code>service.py</code> - the Flask implementation</li>
<li><code>Dockerfile</code> - to build the docker image for our service</li>
<li><code>service.yml</code> - Kubernetes deployment for our service</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="service-implementation-with-flask"></a><a href="#service-implementation-with-flask" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Service implementation with Flask</h2>
<p>We're going to implement a simple &quot;hello world&quot; action in Flask.</p>
<p>When running the microservice inside the platform, we need to register it to the API Gateway.
To do this, we use Microkubes own Python <a href="https://github.com/Microkubes/microkubes-python">library</a>.</p>
<p>Edit <code>setup.py</code> and put:</p>
<pre><code class="hljs css language-python">
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask
<span class="hljs-keyword">from</span> microkubes.gateway <span class="hljs-keyword">import</span> KongGatewayRegistrator


app = Flask(__name__)
registrator = KongGatewayRegistrator(os.environ.get(<span class="hljs-string">"API_GATEWAY_URL"</span>, <span class="hljs-string">"http://localhost:8001"</span>))  <span class="hljs-comment"># Use the Kong registrator for Microkubes</span>


<span class="hljs-comment"># Self-registration on the API Gateway must be the first thing we do when running this service.</span>
<span class="hljs-comment"># If the registration fails, then the whole service must terminate.</span>
registrator.register(name=<span class="hljs-string">"hello-service"</span>,                  <span class="hljs-comment"># the service name.</span>
                     paths=[<span class="hljs-string">"/hello"</span>],                      <span class="hljs-comment"># URL pattern that Kong will use to redirect requests to out service</span>
                     host=<span class="hljs-string">"hello-service.services.consul"</span>,  <span class="hljs-comment"># The hostname of the service.</span>
                     port=<span class="hljs-number">5000</span>)                             <span class="hljs-comment"># Flask default port. When redirecting, Kong will call us on this port.</span>


<span class="hljs-meta">@app.route("/hello")</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hello</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello from Flask service on Microkubes"</span>

</code></pre>
<p>Save and exit.</p>
<h2><a class="anchor" aria-hidden="true" id="dockerize-and-build-the-image-for-the-service"></a><a href="#dockerize-and-build-the-image-for-the-service" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dockerize and build the image for the service</h2>
<p>Edit the <code>Dockerfile</code> and put:</p>
<pre><code class="hljs css language-Dockerfile"><span class="hljs-keyword">FROM</span> python:<span class="hljs-number">3.7</span>-slim-stretch

<span class="hljs-comment"># Install microkubes-python</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install <span class="hljs-string">"git+https://github.com/Microkubes/microkubes-python#egg=microkubes-python"</span></span>
<span class="hljs-comment"># Install flask</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install Flask</span>

<span class="hljs-comment"># Add the service file to the container image</span>
<span class="hljs-keyword">ADD</span><span class="bash"> service.py /service.py</span>

<span class="hljs-keyword">ENV</span> FLASK_APP=service.py

<span class="hljs-comment"># run the service</span>
<span class="hljs-keyword">CMD</span><span class="bash"> [<span class="hljs-string">"flask"</span>, <span class="hljs-string">"run"</span>]</span>

</code></pre>
<p>We need Python 3 (3.6 and above) and we need to install <code>microkubes-python</code> which is a library for integrating
microservices written in Python with Microkubes platform.
We're going to use the registrator API from the library to register our service on Kong API Gateway.</p>
<p>Once we have the Dockerfile implemented, we need to build image with docker:</p>
<pre><code class="hljs css language-bash">docker build -t hello-service:latest .
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="kubernetes-deployment"></a><a href="#kubernetes-deployment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Kubernetes deployment</h2>
<p>To deploy our service on Microkubes, we need to create Kubernetes deployment. This is a <code>yaml</code> file that describes
which docker image to use, how many instances (containers) to be started, configures environment, ports and many other things.</p>
<p>Edit <code>service.yaml</code> and put:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">extensions/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
<span class="hljs-attr">  name:</span> <span class="hljs-string">hello-service</span>
<span class="hljs-attr">  namespace:</span> <span class="hljs-string">microkubes</span>
<span class="hljs-attr">  labels:</span>
<span class="hljs-attr">    app:</span> <span class="hljs-string">hello-service</span>
<span class="hljs-attr">    platform:</span> <span class="hljs-string">microkubes</span>
<span class="hljs-attr">spec:</span>
<span class="hljs-attr">  replicas:</span> <span class="hljs-number">1</span>
<span class="hljs-attr">  template:</span>
<span class="hljs-attr">    metadata:</span>
<span class="hljs-attr">      name:</span> <span class="hljs-string">hello-service</span>
<span class="hljs-attr">      labels:</span>
<span class="hljs-attr">        app:</span> <span class="hljs-string">hello-service</span>
<span class="hljs-attr">        platform:</span> <span class="hljs-string">microkubes</span>
<span class="hljs-attr">      annotations:</span>
        <span class="hljs-string">consul.register/enabled:</span> <span class="hljs-string">"true"</span>
        <span class="hljs-string">consul.register/service.name:</span> <span class="hljs-string">"hello-service"</span>
<span class="hljs-attr">    spec:</span>
<span class="hljs-attr">      containers:</span>
<span class="hljs-attr">        - name:</span> <span class="hljs-string">hello-service</span>
<span class="hljs-attr">          image:</span> <span class="hljs-attr">hello-service:latest</span>
<span class="hljs-attr">          imagePullPolicy:</span> <span class="hljs-string">Always</span>
<span class="hljs-attr">          env:</span>
<span class="hljs-attr">            - name:</span> <span class="hljs-string">API_GATEWAY_URL</span>
<span class="hljs-attr">              value:</span> <span class="hljs-string">"http://kong-admin:8001"</span>
<span class="hljs-attr">          ports:</span>
<span class="hljs-attr">            - containerPort:</span> <span class="hljs-number">5000</span>
</code></pre>
<p>If you're not familiar with Kubernetes deployments, do not worry yourself, just make sure that the name of the service (&quot;hello-service&quot;)
is the same as the name you are registering from the Python code, the image name (&quot;hello-service:latest&quot;) is correct and you have the
correct port exposed (5000).</p>
<p>To deploy, execute the following command:</p>
<pre><code class="hljs css language-bash">kubectl create -f service.yaml
</code></pre>
<p>Wait for the service to start up (this could take a couple of seconds), then try calling the service:</p>
<pre><code class="hljs"><span class="hljs-attribute">MICROKUBES_URL</span>=`minikube<span class="hljs-built_in"> service </span>-n microkubes kong --url`
curl <span class="hljs-variable">$MICROKUBES_URL</span>/hello
</code></pre>
<p>You should see the service response:</p>
<pre><code class="hljs">Hello <span class="hljs-keyword">from</span> Flask<span class="hljs-built_in"> service </span>on Microkubes
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-next button" href="/docs/introduction.html"><span>Introduction</span><span class="arrow-next"> →</span></a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Docs</h5><a href="/docs/installation-and-setup.html">Getting Started</a><a href="/docs/introduction.html">Microkubes Manual</a></div><div><h5>Community</h5><a href="http://stackoverflow.com/questions/tagged/microkubes" target="_blank">Stack Overflow</a></div><div><h5>Social</h5><a class="github-button" href="https://github.com/Microkubes/microkubes" data-icon="octicon-star" data-count-href="/microkubes/microkubes/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><div class="social"><a href="https://twitter.com/Microkubes" class="twitter-follow-button">Follow @Microkubes</a></div></div></section><section class="copyright">Copyright © 2019 <a href="https://www.keitaro.com/">Keitaro Inc.</a></section><noscript><img height="1" width="1" style="display:none" alt="" src="https://dc.ads.linkedin.com/collect/?pid=844314&amp;fmt=gif"/></noscript></footer></div><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script></body></html>